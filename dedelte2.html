<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feminizer 2.0 - Progressive Feminization Platform</title>
  
  <!-- PWA Configuration -->
  <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiRmVtaW5pemVyIDIuMCIsInNob3J0X25hbWUiOiJGZW1pbml6ZXIiLCJzdGFydF91cmwiOiIvIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJ0aGVtZV9jb2xvciI6IiNGRjY5QjQiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiI0ZGRkZGRiJ9">
  <meta name="theme-color" content="#FF69B4">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  
  <style>
    /* ===== CSS VARIABLES & THEME ROSE FEMINIZATION ===== */
    :root {
      /* Rose Feminization Theme */
      --primary: #FF69B4;
      --primary-light: #FFB6C1;
      --primary-dark: #DC143C;
      --secondary: #FFF0F5;
      --accent: #FF1493;
      --accent-light: #FFCCCB;
      
      /* Feminine Gradient Colors */
      --gradient-main: linear-gradient(135deg, #FF69B4, #FF1493, #DC143C);
      --gradient-soft: linear-gradient(135deg, #FFB6C1, #FFC0CB, #FFE4E1);
      --gradient-card: linear-gradient(145deg, #FFFFFF, #FFF0F5);
      
      /* Text Colors */
      --text: #2D1B69;
      --text-light: #8B4B8C;
      --text-muted: #B19CD9;
      --text-white: #FFFFFF;
      
      /* UI Colors */
      --border: #E6E6FA;
      --success: #FF69B4;
      --warning: #FFB347;
      --error: #FF6B6B;
      --info: #87CEEB;
      --background: #FFFFFF;
      --surface: #FFF8DC;
      
      /* Shadows & Effects */
      --shadow: 0 8px 32px rgba(255, 105, 180, 0.15);
      --shadow-lg: 0 16px 48px rgba(255, 105, 180, 0.25);
      --shadow-xl: 0 24px 64px rgba(255, 105, 180, 0.35);
      --radius: 20px;
      --radius-sm: 12px;
      --radius-lg: 28px;
      
      /* Skill Colors */
      --feminization: #FF1493;
      --obedience: #DC143C;
      --exposure: #FF69B4;
      --hypno: #DA70D6;
      
      /* Animations */
      --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      --bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    /* ===== BASE STYLES ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--gradient-soft);
      color: var(--text);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
      min-height: 100vh;
    }

    .container {
      max-width: 428px;
      margin: 0 auto;
      background: var(--background);
      min-height: 100vh;
      position: relative;
      box-shadow: var(--shadow-xl);
      border-radius: 0;
      overflow: hidden;
    }

    @media (min-width: 768px) {
      .container {
        max-width: 800px;
        border-radius: var(--radius-lg);
        margin: 20px auto;
        min-height: calc(100vh - 40px);
      }
    }

    @media (min-width: 1024px) {
      .container {
        max-width: 1200px;
        display: grid;
        grid-template-columns: 280px 1fr;
        grid-template-rows: auto 1fr auto;
        grid-template-areas: 
          "header header"
          "nav content"
          "status status";
      }
    }

    /* ===== HEADER STYLES ===== */
    .header {
      background: var(--gradient-main);
      color: var(--text-white);
      padding: 24px;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      grid-area: header;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      max-width: 1000px;
      margin-left: auto;
      margin-right: auto;
    }

    .profile-section {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .profile-avatar {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      background: var(--gradient-soft);
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: 800;
      cursor: pointer;
      transition: var(--transition);
      border: 3px solid rgba(255, 255, 255, 0.3);
      position: relative;
      overflow: hidden;
    }

    .profile-avatar::before {
      content: '';
      position: absolute;
      inset: 0;
      background: var(--gradient-main);
      opacity: 0;
      transition: var(--transition);
    }

    .profile-avatar:hover {
      transform: scale(1.1) rotate(5deg);
      box-shadow: var(--shadow-lg);
    }

    .profile-avatar:hover::before {
      opacity: 0.1;
    }

    .profile-info h1 {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .profile-level {
      font-size: 14px;
      opacity: 0.95;
      background: rgba(255, 255, 255, 0.25);
      padding: 8px 16px;
      border-radius: 25px;
      display: inline-block;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-weight: 500;
    }

    .header-actions {
      display: flex;
      gap: 12px;
    }

    .header-btn {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: var(--text-white);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .header-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-3px) scale(1.05);
      box-shadow: var(--shadow);
    }

    /* XP Progress Bar in Header */
    .xp-container {
      max-width: 1000px;
      margin: 0 auto;
    }

    .xp-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      font-size: 14px;
      font-weight: 500;
    }

    .xp-bar {
      height: 16px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 25px;
      overflow: hidden;
      position: relative;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .xp-progress {
      height: 100%;
      background: linear-gradient(90deg, #FFE4E1, #FFFFFF, #FFE4E1);
      border-radius: 25px;
      transition: width 1.2s var(--bounce);
      position: relative;
      overflow: hidden;
    }

    .xp-progress::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* ===== NAVIGATION STYLES ===== */
    .nav {
      background: var(--background);
      padding: 0;
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 140px;
      z-index: 99;
      overflow-x: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
      grid-area: nav;
    }

    @media (min-width: 1024px) {
      .nav {
        position: static;
        border-bottom: none;
        border-right: 1px solid var(--border);
        height: 100%;
        overflow-y: auto;
        background: var(--gradient-card);
      }
      
      .nav-tabs {
        flex-direction: column !important;
        padding: 24px 0;
      }
      
      .nav-tab {
        padding: 16px 24px !important;
        border-bottom: none !important;
        border-right: 3px solid transparent !important;
        justify-content: flex-start !important;
        gap: 12px;
        margin: 4px 12px;
        border-radius: var(--radius-sm) !important;
      }
      
      .nav-tab.active {
        border-right-color: var(--primary) !important;
        background: var(--gradient-soft) !important;
      }
    }

    .nav::-webkit-scrollbar {
      display: none;
    }

    .nav-tabs {
      display: flex;
      gap: 0;
      min-width: max-content;
      padding: 0 16px;
    }

    .nav-tab {
      flex: 1;
      padding: 16px 20px;
      text-align: center;
      color: var(--text-light);
      text-decoration: none;
      font-size: 13px;
      font-weight: 600;
      border-bottom: 3px solid transparent;
      transition: var(--transition);
      white-space: nowrap;
      min-width: 100px;
      position: relative;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      border-radius: var(--radius-sm) var(--radius-sm) 0 0;
    }

    .nav-tab:hover {
      color: var(--primary);
      background: var(--accent-light);
      transform: translateY(-2px);
    }

    .nav-tab.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
      background: var(--gradient-soft);
      box-shadow: var(--shadow);
    }

    .nav-tab i {
      font-size: 16px;
    }

    .nav-tab.has-notification::after {
      content: '';
      position: absolute;
      top: 12px;
      right: 12px;
      width: 10px;
      height: 10px;
      background: var(--error);
      border-radius: 50%;
      animation: pulse 2s infinite;
      border: 2px solid var(--text-white);
    }

    /* ===== CONTENT STYLES ===== */
    .content {
      padding: 32px 24px;
      min-height: calc(100vh - 300px);
      grid-area: content;
      overflow-y: auto;
    }

    @media (min-width: 1024px) {
      .content {
        padding: 40px;
        min-height: auto;
      }
    }

    .section {
      display: none;
      animation: fadeInUp 0.6s ease-out;
    }

    .section.active {
      display: block;
    }

    @keyframes fadeInUp {
      from { 
        opacity: 0; 
        transform: translateY(30px); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0); 
      }
    }

    .card {
      background: var(--gradient-card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 24px;
      overflow: hidden;
      border: 1px solid var(--border);
      transition: var(--transition);
      position: relative;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-main);
      opacity: 0.8;
    }

    .card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-4px);
    }

    .card-header {
      padding: 24px 24px 0;
      border-bottom: none;
    }

    .card-body {
      padding: 24px;
    }

    .card-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .card-title i {
      color: var(--primary);
      font-size: 22px;
    }

    .card-subtitle {
      font-size: 14px;
      color: var(--text-light);
      margin-bottom: 20px;
      font-weight: 500;
    }

    /* ===== MODAL STYLES ===== */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
    }

    .modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: var(--gradient-card);
      border-radius: var(--radius);
      padding: 32px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: var(--shadow-xl);
      border: 1px solid var(--border);
      position: relative;
      animation: modalSlide 0.3s ease-out;
    }

    @keyframes modalSlide {
      from {
        opacity: 0;
        transform: translateY(-50px) scale(0.8);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--border);
    }

    .modal-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--text);
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--text-light);
      transition: var(--transition);
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-close:hover {
      background: var(--accent-light);
      color: var(--text);
      transform: scale(1.1);
    }

    .form-group {
      margin-bottom: 24px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text);
    }

    .form-input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      font-size: 16px;
      transition: var(--transition);
      background: var(--background);
      color: var(--text);
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary);
      background: var(--accent-light);
    }

    .avatar-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 12px;
      margin-top: 16px;
    }

    .avatar-option {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--gradient-soft);
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      transition: var(--transition);
      border: 3px solid transparent;
    }

    .avatar-option:hover {
      transform: scale(1.1);
      border-color: var(--primary);
    }

    .avatar-option.selected {
      border-color: var(--primary);
      background: var(--gradient-main);
      color: var(--text-white);
    }

    /* ===== STATS GRID STYLES ===== */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 32px;
    }

    @media (min-width: 768px) {
      .stats-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    .stat-card {
      background: var(--gradient-card);
      padding: 24px;
      border-radius: var(--radius);
      text-align: center;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-main);
    }

    .stat-card:hover {
      transform: translateY(-6px) scale(1.02);
      box-shadow: var(--shadow-lg);
    }

    .stat-number {
      font-size: 32px;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 8px;
      animation: countUp 1.2s ease-out;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .stat-label {
      font-size: 12px;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
    }

    .stat-icon {
      position: absolute;
      top: 20px;
      right: 20px;
      opacity: 0.15;
      font-size: 28px;
      color: var(--primary);
    }

    @keyframes countUp {
      from { 
        transform: scale(0.5);
        opacity: 0;
      }
      to { 
        transform: scale(1);
        opacity: 1;
      }
    }

    /* ===== PROGRESS STYLES ===== */
    .progress-container {
      margin-bottom: 32px;
    }

    .progress-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .level-badge {
      background: var(--gradient-main);
      color: var(--text-white);
      padding: 8px 20px;
      border-radius: 25px;
      font-size: 14px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      box-shadow: var(--shadow);
    }

    .xp-text {
      font-size: 14px;
      color: var(--text-light);
      font-weight: 600;
    }

    .progress-bar {
      height: 16px;
      background: var(--border);
      border-radius: 25px;
      overflow: hidden;
      position: relative;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .progress-fill {
      height: 100%;
      background: var(--gradient-main);
      border-radius: 25px;
      transition: width 1.5s var(--bounce);
      position: relative;
      overflow: hidden;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shimmer 2s infinite;
    }

    /* ===== SKILL PROGRESS STYLES ===== */
    .sissy-progress {
      display: grid;
      gap: 20px;
      margin-bottom: 32px;
    }

    .progress-item {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 20px;
      background: var(--gradient-card);
      border-radius: var(--radius);
      border: 1px solid var(--border);
      transition: var(--transition);
      box-shadow: var(--shadow);
    }

    .progress-item:hover {
      background: var(--accent-light);
      border-color: var(--primary);
      transform: translateX(4px);
      box-shadow: var(--shadow-lg);
    }

    .progress-icon {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      flex-shrink: 0;
      position: relative;
      overflow: hidden;
    }

    .progress-icon::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      padding: 2px;
      background: var(--gradient-main);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask-composite: exclude;
    }

    .progress-icon.feminization {
      background: linear-gradient(135deg, var(--feminization), #FF69B4);
      color: var(--text-white);
    }

    .progress-icon.obedience {
      background: linear-gradient(135deg, var(--obedience), #FF1493);
      color: var(--text-white);
    }

    .progress-icon.exposure {
      background: linear-gradient(135deg, var(--exposure), #FF69B4);
      color: var(--text-white);
    }

    .progress-icon.hypno {
      background: linear-gradient(135deg, var(--hypno), #BA55D3);
      color: var(--text-white);
    }

    .progress-content {
      flex: 1;
    }

    .progress-label {
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--text);
      font-size: 16px;
    }

    .progress-bar-sissy {
      height: 12px;
      background: var(--border);
      border-radius: 25px;
      overflow: hidden;
      margin-bottom: 8px;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .progress-fill-sissy {
      height: 100%;
      border-radius: 25px;
      transition: width 1.2s var(--bounce);
      position: relative;
      overflow: hidden;
    }

    .progress-fill-sissy::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shimmer 2s infinite;
    }

    .progress-fill-sissy.feminization {
      background: linear-gradient(90deg, var(--feminization), #FF69B4);
    }

    .progress-fill-sissy.obedience {
      background: linear-gradient(90deg, var(--obedience), #FF1493);
    }

    .progress-fill-sissy.exposure {
      background: linear-gradient(90deg, var(--exposure), #FF69B4);
    }

    .progress-fill-sissy.hypno {
      background: linear-gradient(90deg, var(--hypno), #BA55D3);
    }

    .progress-percentage {
      font-size: 14px;
      color: var(--text-light);
      font-weight: 600;
    }

    /* ===== HYPNO SECTION STYLES ===== */
    .hypno-session-card {
      background: linear-gradient(145deg, #DA70D6, #BA55D3);
      color: var(--text-white);
      border: none;
      margin-bottom: 24px;
    }

    .hypno-session-card .card-title {
      color: var(--text-white);
    }

    .hypno-session-card::before {
      background: linear-gradient(90deg, #9370DB, #8A2BE2);
    }

    .audio-player {
      background: rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-sm);
      padding: 20px;
      margin-bottom: 20px;
      backdrop-filter: blur(10px);
    }

    .audio-controls {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
    }

    .play-btn {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: var(--text-white);
      color: var(--hypno);
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--shadow);
    }

    .play-btn:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-lg);
    }

    .audio-info {
      flex: 1;
    }

    .audio-title {
      font-weight: 700;
      margin-bottom: 4px;
    }

    .audio-duration {
      font-size: 14px;
      opacity: 0.8;
    }

    .session-timer {
      background: rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-sm);
      padding: 16px;
      text-align: center;
      backdrop-filter: blur(10px);
    }

    .timer-display {
      font-size: 48px;
      font-weight: 800;
      margin-bottom: 8px;
    }

    .timer-label {
      font-size: 14px;
      opacity: 0.8;
    }

    /* ===== DAYS LOCKED STYLES ===== */
    .days-locked-counter {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 32px 0;
    }

    .counter-icon {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: var(--gradient-main);
      color: var(--text-white);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
      margin-bottom: 24px;
      box-shadow: var(--shadow-lg);
      animation: pulse 3s infinite;
      position: relative;
      overflow: hidden;
    }

    .counter-icon::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,255,255,0.2), transparent);
      animation: ripple 2s infinite;
    }

    @keyframes ripple {
      0% { transform: scale(0.8); opacity: 1; }
      100% { transform: scale(1.2); opacity: 0; }
    }

    .counter-number {
      font-size: 64px;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 12px;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .counter-label {
      font-size: 18px;
      color: var(--text-light);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Calendar Styles */
    .calendar-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .calendar-nav h3 {
      font-size: 20px;
      font-weight: 700;
      color: var(--text);
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      margin-bottom: 24px;
    }

    .calendar-day-header {
      text-align: center;
      font-weight: 700;
      font-size: 12px;
      color: var(--text-light);
      padding: 12px 4px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .calendar-day {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--radius-sm);
      border: 2px solid var(--border);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      min-height: 44px;
      background: var(--background);
    }

    .calendar-day:hover {
      border-color: var(--primary);
      background: var(--accent-light);
      transform: scale(1.05);
    }

    .calendar-day.empty {
      border: none;
      cursor: default;
      background: transparent;
    }

    .calendar-day.locked {
      background: var(--gradient-soft);
      border-color: var(--primary);
      color: var(--primary);
      position: relative;
      font-weight: 700;
    }

    .calendar-day.locked::after {
      content: 'ðŸ”’';
      font-size: 10px;
      position: absolute;
      top: 2px;
      right: 2px;
    }

    .calendar-day.current {
      background: var(--gradient-main);
      color: var(--text-white);
      border-color: var(--primary-dark);
      box-shadow: var(--shadow);
      transform: scale(1.1);
    }

    .calendar-legend {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-top: 24px;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .legend-color {
      width: 20px;
      height: 20px;
      border-radius: var(--radius-sm);
      border: 2px solid var(--border);
    }

    .legend-color.locked {
      background: var(--gradient-soft);
      border-color: var(--primary);
    }

    .legend-color.current {
      background: var(--gradient-main);
      border-color: var(--primary-dark);
    }

    .legend-label {
      font-size: 12px;
      color: var(--text-light);
      font-weight: 600;
    }

    /* ===== ACHIEVEMENT STYLES ===== */
    .achievement-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 32px;
    }

    @media (min-width: 768px) {
      .achievement-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (min-width: 1024px) {
      .achievement-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    .achievement-card {
      background: var(--gradient-card);
      border: 2px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      text-align: center;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    .achievement-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: translateX(-100%);
      transition: transform 0.8s;
    }

    .achievement-card:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: var(--shadow-lg);
    }

    .achievement-card.unlocked {
      border-color: var(--success);
      background: var(--gradient-soft);
      animation: achievementUnlock 0.8s var(--bounce);
    }

    .achievement-card.unlocked::before {
      transform: translateX(100%);
    }

    @keyframes achievementUnlock {
      0% { transform: scale(1); }
      50% { transform: scale(1.1) rotate(2deg); }
      100% { transform: scale(1); }
    }

    .achievement-icon {
      font-size: 40px;
      margin-bottom: 12px;
      display: block;
      filter: grayscale(100%);
      transition: var(--transition);
    }

    .achievement-card.unlocked .achievement-icon {
      filter: grayscale(0%);
      animation: bounce 1.2s ease;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      25% { transform: translateY(-8px) rotate(-5deg); }
      50% { transform: translateY(-4px) rotate(2deg); }
      75% { transform: translateY(-12px) rotate(-2deg); }
    }

    .achievement-title {
      font-size: 14px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--text);
    }

    .achievement-desc {
      font-size: 11px;
      color: var(--text-light);
      line-height: 1.4;
      font-weight: 500;
    }

    .achievement-progress {
      margin-top: 12px;
      height: 6px;
      background: var(--border);
      border-radius: 3px;
      overflow: hidden;
    }

    .achievement-progress-fill {
      height: 100%;
      background: var(--gradient-main);
      transition: width 0.8s ease;
    }

    /* ===== TASK STYLES WITH CATEGORIES ===== */
    .task-categories {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .category-filter {
      padding: 8px 16px;
      border: 2px solid var(--border);
      background: var(--background);
      border-radius: 25px;
      cursor: pointer;
      transition: var(--transition);
      font-size: 14px;
      font-weight: 600;
      color: var(--text-light);
    }

    .category-filter:hover {
      border-color: var(--primary);
      background: var(--accent-light);
      color: var(--primary);
      transform: scale(1.05);
    }

    .category-filter.active {
      background: var(--gradient-main);
      color: var(--text-white);
      border-color: var(--primary);
      box-shadow: var(--shadow);
    }

    .task-grid {
      display: grid;
      gap: 16px;
      margin-bottom: 24px;
    }

    .task-card {
      background: var(--gradient-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .task-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .task-card.completed {
      opacity: 0.7;
      background: var(--gradient-soft);
    }

    .task-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .task-title {
      font-weight: 700;
      color: var(--text);
      font-size: 16px;
    }

    .task-category-badge {
      background: var(--gradient-main);
      color: var(--text-white);
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .task-xp {
      background: var(--gradient-main);
      color: var(--text-white);
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }

    .task-description {
      color: var(--text-light);
      margin-bottom: 16px;
      font-size: 14px;
    }

    .task-actions {
      display: flex;
      gap: 12px;
    }

    /* ===== BUTTON STYLES ===== */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 16px 32px;
      border: none;
      border-radius: var(--radius);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      text-decoration: none;
      min-height: 56px;
      gap: 12px;
      position: relative;
      overflow: hidden;
      font-family: inherit;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.6s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-primary {
      background: var(--gradient-main);
      color: var(--text-white);
      box-shadow: var(--shadow);
    }

    .btn-primary:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: var(--shadow-lg);
    }

    .btn-sm {
      padding: 12px 24px;
      font-size: 14px;
      min-height: 44px;
      border-radius: var(--radius-sm);
    }

    .btn-hypno {
      background: linear-gradient(135deg, var(--hypno), #BA55D3);
      color: var(--text-white);
      box-shadow: var(--shadow);
    }

    .btn-hypno:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: var(--shadow-lg);
    }

    /* ===== NOTIFICATION STYLES ===== */
    .notification-container {
      position: fixed;
      top: 24px;
      right: 24px;
      z-index: 1000;
      max-width: 350px;
    }

    .notification {
      background: var(--gradient-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 16px;
      box-shadow: var(--shadow-lg);
      animation: notificationSlide 0.5s var(--bounce);
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(20px);
    }

    @keyframes notificationSlide {
      from {
        opacity: 0;
        transform: translateX(100%) scale(0.8);
      }
      to {
        opacity: 1;
        transform: translateX(0) scale(1);
      }
    }

    .notification::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--gradient-main);
    }

    .notification.success::before {
      background: var(--success);
    }

    .notification-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .notification-title {
      font-weight: 700;
      font-size: 16px;
      color: var(--text);
    }

    .notification-close {
      background: none;
      border: none;
      color: var(--text-light);
      cursor: pointer;
      padding: 0;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .notification-close:hover {
      background: var(--border);
      color: var(--text);
      transform: scale(1.1);
    }

    .notification-content {
      font-size: 14px;
      color: var(--text-light);
      font-weight: 500;
    }

    /* ===== STATUS BAR STYLES ===== */
    .status-bar {
      position: sticky;
      bottom: 0;
      background: var(--gradient-card);
      border-top: 1px solid var(--border);
      padding: 20px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      z-index: 98;
      backdrop-filter: blur(20px);
      grid-area: status;
    }

    .status-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      border-radius: var(--radius);
      transition: var(--transition);
      cursor: pointer;
      flex: 1;
      justify-content: center;
      background: var(--background);
      border: 1px solid var(--border);
      margin: 0 4px;
    }

    .status-item:hover {
      background: var(--accent-light);
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }

    .status-icon {
      font-size: 18px;
      color: var(--primary);
    }

    .status-label {
      font-size: 12px;
      color: var(--text-light);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-value {
      font-size: 14px;
      font-weight: 700;
      color: var(--text);
    }

    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-left: 6px;
    }

    .status-indicator.active {
      background: var(--success);
      animation: pulse 2s infinite;
      box-shadow: 0 0 8px var(--success);
    }

    .status-indicator.inactive {
      background: var(--error);
    }

    @keyframes pulse {
      0% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.1); }
      100% { opacity: 1; transform: scale(1); }
    }

    /* ===== PROFILE SECTION ===== */
    .profile-grid {
      display: grid;
      gap: 24px;
      margin-bottom: 24px;
    }

    @media (min-width: 768px) {
      .profile-grid {
        grid-template-columns: 300px 1fr;
      }
    }

    .profile-avatar-large {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: var(--gradient-main);
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
      color: var(--text-white);
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow: hidden;
      cursor: pointer;
      transition: var(--transition);
    }

    .profile-avatar-large:hover {
      transform: scale(1.05) rotate(5deg);
    }

    .profile-info-card {
      text-align: center;
    }

    .profile-name {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--text);
    }

    .profile-title {
      color: var(--text-light);
      margin-bottom: 20px;
      font-weight: 500;
    }

    .profile-stats {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    /* ===== RESPONSIVE ADJUSTMENTS ===== */
    @media (max-width: 480px) {
      .content {
        padding: 20px 16px;
      }
      
      .header {
        padding: 20px 16px;
      }

      .header-content {
        flex-direction: column;
        gap: 16px;
        text-align: center;
      }

      .profile-section {
        flex-direction: column;
        gap: 12px;
      }

      .nav-tab {
        font-size: 11px;
        padding: 12px 16px;
        min-width: 80px;
      }

      .stats-grid {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .achievement-grid {
        grid-template-columns: 1fr;
      }

      .status-bar {
        padding: 16px 12px;
      }

      .status-item {
        flex-direction: column;
        gap: 6px;
        padding: 8px 12px;
        margin: 0 2px;
      }

      .btn {
        font-size: 14px;
        padding: 14px 24px;
        min-height: 48px;
      }

      .calendar-day {
        min-height: 36px;
        font-size: 12px;
      }

      .counter-icon {
        width: 100px;
        height: 100px;
        font-size: 40px;
      }

      .counter-number {
        font-size: 48px;
      }

      .task-categories {
        gap: 8px;
      }

      .category-filter {
        padding: 6px 12px;
        font-size: 12px;
      }

      .modal-content {
        padding: 24px;
        max-width: 95%;
      }

      .avatar-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    /* ===== LOADING ANIMATION ===== */
    .loading {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--gradient-soft);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }

    .loading.active {
      display: flex;
    }

    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid var(--border);
      border-top: 4px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 20px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-text {
      color: var(--text);
      font-weight: 600;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading active" id="loadingScreen">
    <div class="loading-spinner"></div>
    <div class="loading-text">Initializing Feminizer 2.0...</div>
  </div>

  <!-- Settings Modal -->
  <div class="modal" id="settingsModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Profile Settings</h2>
        <button class="modal-close" onclick="closeSettings()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="form-group">
        <label class="form-label">Your Name</label>
        <input type="text" class="form-input" id="nameInput" placeholder="Enter your name...">
      </div>
      
      <div class="form-group">
        <label class="form-label">Choose Your Avatar</label>
        <div class="avatar-grid">
          <div class="avatar-option" data-avatar="ðŸ‘¸" onclick="selectAvatar('ðŸ‘¸')">ðŸ‘¸</div>
          <div class="avatar-option" data-avatar="ðŸ’„" onclick="selectAvatar('ðŸ’„')">ðŸ’„</div>
          <div class="avatar-option" data-avatar="ðŸ’‹" onclick="selectAvatar('ðŸ’‹')">ðŸ’‹</div>
          <div class="avatar-option" data-avatar="ðŸŒ¸" onclick="selectAvatar('ðŸŒ¸')">ðŸŒ¸</div>
          <div class="avatar-option" data-avatar="ðŸ¦„" onclick="selectAvatar('ðŸ¦„')">ðŸ¦„</div>
          <div class="avatar-option" data-avatar="ðŸŒ¹" onclick="selectAvatar('ðŸŒ¹')">ðŸŒ¹</div>
          <div class="avatar-option" data-avatar="ðŸ’•" onclick="selectAvatar('ðŸ’•')">ðŸ’•</div>
          <div class="avatar-option" data-avatar="âœ¨" onclick="selectAvatar('âœ¨')">âœ¨</div>
          <div class="avatar-option" data-avatar="ðŸŽ€" onclick="selectAvatar('ðŸŽ€')">ðŸŽ€</div>
          <div class="avatar-option" data-avatar="ðŸ’–" onclick="selectAvatar('ðŸ’–')">ðŸ’–</div>
          <div class="avatar-option" data-avatar="ðŸŒº" onclick="selectAvatar('ðŸŒº')">ðŸŒº</div>
          <div class="avatar-option" data-avatar="ðŸ¦‹" onclick="selectAvatar('ðŸ¦‹')">ðŸ¦‹</div>
        </div>
      </div>
      
      <div style="display: flex; gap: 16px; justify-content: center;">
        <button class="btn btn-primary" onclick="saveSettings()">
          <i class="fas fa-save"></i>
          Save Changes
        </button>
        <button class="btn" onclick="closeSettings()" style="background: var(--border); color: var(--text);">
          Cancel
        </button>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="profile-section">
          <div class="profile-avatar" id="profileAvatar">ðŸ‘¸</div>
          <div class="profile-info">
            <h1 id="profileName">Princess</h1>
            <div class="profile-level" id="profileLevel">Curious (Level 1)</div>
          </div>
        </div>
        <div class="header-actions">
          <button class="header-btn" id="notificationsBtn" title="Notifications">
            <i class="fas fa-bell"></i>
          </button>
          <button class="header-btn" id="settingsBtn" title="Settings" onclick="openSettings()">
            <i class="fas fa-cog"></i>
          </button>
        </div>
      </div>
      
      <!-- XP Progress Bar -->
      <div class="xp-container">
        <div class="xp-info">
          <span id="levelDisplay">Level 1 - Curious</span>
          <span id="xpDisplay">0 / 100 XP</span>
        </div>
        <div class="xp-bar">
          <div class="xp-progress" id="xpProgress" style="width: 0%"></div>
        </div>
      </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
      <div class="nav-tabs">
        <a href="#" class="nav-tab active" data-section="dashboard">
          <i class="fas fa-home"></i>
          <span>Dashboard</span>
        </a>
        <a href="#" class="nav-tab" data-section="dayslocked">
          <i class="fas fa-lock"></i>
          <span>Days Locked</span>
        </a>
        <a href="#" class="nav-tab" data-section="tasks">
          <i class="fas fa-tasks"></i>
          <span>Tasks</span>
        </a>
        <a href="#" class="nav-tab" data-section="hypno">
          <i class="fas fa-brain"></i>
          <span>Hypno</span>
        </a>
        <a href="#" class="nav-tab" data-section="achievements">
          <i class="fas fa-trophy"></i>
          <span>Achievements</span>
        </a>
        <a href="#" class="nav-tab" data-section="profile">
          <i class="fas fa-user"></i>
          <span>Profile</span>
        </a>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="content">
      <!-- Dashboard Section -->
      <section id="dashboard" class="section active">
        <!-- Stats Grid -->
        <div class="stats-grid">
          <div class="stat-card">
            <i class="fas fa-star stat-icon"></i>
            <div class="stat-number" id="totalXP">0</div>
            <div class="stat-label">Total XP</div>
          </div>
          <div class="stat-card">
            <i class="fas fa-level-up-alt stat-icon"></i>
            <div class="stat-number" id="currentLevel">1</div>
            <div class="stat-label">Level</div>
          </div>
          <div class="stat-card">
            <i class="fas fa-check-circle stat-icon"></i>
            <div class="stat-number" id="tasksCompleted">0</div>
            <div class="stat-label">Tasks</div>
          </div>
          <div class="stat-card">
            <i class="fas fa-fire stat-icon"></i>
            <div class="stat-number" id="dayStreak">0</div>
            <div class="stat-label">Streak</div>
          </div>
          <div class="stat-card">
            <i class="fas fa-clock stat-icon"></i>
            <div class="stat-number" id="totalSessions">0</div>
            <div class="stat-label">Sessions</div>
          </div>
          <div class="stat-card">
            <i class="fas fa-percentage stat-icon"></i>
            <div class="stat-number" id="completionRate">0%</div>
            <div class="stat-label">Rate</div>
          </div>
        </div>

        <!-- Overall Progress -->
        <div class="card">
          <div class="card-body">
            <div class="progress-container">
              <div class="progress-info">
                <span class="level-badge" id="levelBadge">Curious</span>
                <span class="xp-text" id="xpProgressText">0 / 100 XP</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Skill Progress -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-chart-line"></i>
              Skill Progress
            </h2>
          </div>
          <div class="card-body">
            <div class="sissy-progress">
              <div class="progress-item">
                <div class="progress-icon feminization">
                  <i class="fas fa-venus"></i>
                </div>
                <div class="progress-content">
                  <div class="progress-label">Feminization</div>
                  <div class="progress-bar-sissy">
                    <div class="progress-fill-sissy feminization" id="feminizationProgress" style="width: 0%"></div>
                  </div>
                  <div class="progress-percentage" id="feminizationPercent">0%</div>
                </div>
              </div>
              
              <div class="progress-item">
                <div class="progress-icon obedience">
                  <i class="fas fa-heart"></i>
                </div>
                <div class="progress-content">
                  <div class="progress-label">Obedience</div>
                  <div class="progress-bar-sissy">
                    <div class="progress-fill-sissy obedience" id="obedienceProgress" style="width: 0%"></div>
                  </div>
                  <div class="progress-percentage" id="obediencePercent">0%</div>
                </div>
              </div>
              
              <div class="progress-item">
                <div class="progress-icon exposure">
                  <i class="fas fa-eye"></i>
                </div>
                <div class="progress-content">
                  <div class="progress-label">Exposure</div>
                  <div class="progress-bar-sissy">
                    <div class="progress-fill-sissy exposure" id="exposureProgress" style="width: 0%"></div>
                  </div>
                  <div class="progress-percentage" id="exposurePercent">0%</div>
                </div>
              </div>
              
              <div class="progress-item">
                <div class="progress-icon hypno">
                  <i class="fas fa-brain"></i>
                </div>
                <div class="progress-content">
                  <div class="progress-label">Hypno Compliance</div>
                  <div class="progress-bar-sissy">
                    <div class="progress-fill-sissy hypno" id="hypnoProgress" style="width: 0%"></div>
                  </div>
                  <div class="progress-percentage" id="hypnoPercent">0%</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-bolt"></i>
              Quick Actions
            </h2>
          </div>
          <div class="card-body">
            <div style="display: flex; gap: 16px; flex-wrap: wrap; justify-content: center;">
              <button class="btn btn-primary" onclick="addXP(50, 'Daily check-in')">
                <i class="fas fa-calendar-check"></i>
                Check-in (+50 XP)
              </button>
              <button class="btn btn-primary" onclick="addSkillXP('feminization', 25)">
                <i class="fas fa-venus"></i>
                Feminization (+25)
              </button>
              <button class="btn btn-primary" onclick="addSkillXP('obedience', 25)">
                <i class="fas fa-heart"></i>
                Obedience (+25)
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Days Locked Section -->
      <section id="dayslocked" class="section">
        <!-- Days Locked Counter Card -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-lock"></i>
              Chastity Counter
            </h2>
          </div>
          <div class="card-body">
            <!-- Counter Display -->
            <div class="days-locked-counter">
              <div class="counter-icon">
                <i class="fas fa-lock"></i>
              </div>
              <div class="counter-number" id="daysLockedCount">0</div>
              <div class="counter-label">Days Locked</div>
            </div>
            
            <!-- Current Streak -->
            <div class="progress-container">
              <div class="progress-info">
                <span class="level-badge" id="streakBadge">Current Streak</span>
                <span class="xp-text" id="streakProgress">0 days</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="streakProgressFill" style="width: 0%"></div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Calendar View Card -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-calendar-alt"></i>
              Chastity Calendar
            </h2>
          </div>
          <div class="card-body">
            <!-- Month Navigation -->
            <div class="calendar-nav">
              <button class="btn btn-sm" id="prevMonth">
                <i class="fas fa-chevron-left"></i>
              </button>
              <h3 id="currentMonth">July 2025</h3>
              <button class="btn btn-sm" id="nextMonth">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            
            <!-- Calendar Grid -->
            <div class="calendar-grid" id="calendarGrid">
              <!-- Calendar will be populated by JavaScript -->
            </div>
            
            <!-- Calendar Legend -->
            <div class="calendar-legend">
              <div class="legend-item">
                <div class="legend-color locked"></div>
                <div class="legend-label">Locked</div>
              </div>
              <div class="legend-item">
                <div class="legend-color current"></div>
                <div class="legend-label">Today</div>
              </div>
              <div class="legend-item">
                <div class="legend-color"></div>
                <div class="legend-label">Free</div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Statistics Card -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-chart-bar"></i>
              Chastity Statistics
            </h2>
          </div>
          <div class="card-body">
            <div class="stats-grid">
              <div class="stat-card">
                <i class="fas fa-lock stat-icon"></i>
                <div class="stat-number" id="totalDaysLocked">0</div>
                <div class="stat-label">Total Days</div>
              </div>
              <div class="stat-card">
                <i class="fas fa-fire stat-icon"></i>
                <div class="stat-number" id="currentStreak">0</div>
                <div class="stat-label">Current Streak</div>
              </div>
              <div class="stat-card">
                <i class="fas fa-trophy stat-icon"></i>
                <div class="stat-number" id="longestStreak">0</div>
                <div class="stat-label">Longest</div>
              </div>
              <div class="stat-card">
                <i class="fas fa-calendar-check stat-icon"></i>
                <div class="stat-number" id="lockPercentage">0%</div>
                <div class="stat-label">% Year</div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Milestones Card -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-medal"></i>
              Chastity Milestones
            </h2>
          </div>
          <div class="card-body">
            <div class="achievement-grid" id="lockMilestones">
              <div class="achievement-card" data-milestone="1">
                <div class="achievement-icon">ðŸ”’</div>
                <div class="achievement-title">First Day</div>
                <div class="achievement-desc">Locked for 1 day</div>
              </div>
              <div class="achievement-card" data-milestone="7">
                <div class="achievement-icon">ðŸ”’</div>
                <div class="achievement-title">One Week</div>
                <div class="achievement-desc">Locked for 7 days</div>
              </div>
              <div class="achievement-card" data-milestone="30">
                <div class="achievement-icon">ðŸ”’</div>
                <div class="achievement-title">One Month</div>
                <div class="achievement-desc">Locked for 30 days</div>
              </div>
              <div class="achievement-card" data-milestone="90">
                <div class="achievement-icon">ðŸ”’</div>
                <div class="achievement-title">Three Months</div>
                <div class="achievement-desc">Locked for 90 days</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Lock Controls -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-cogs"></i>
              Chastity Controls
            </h2>
          </div>
          <div class="card-body">
            <div style="text-align: center; display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
              <button class="btn btn-primary" id="startLockBtn">
                <i class="fas fa-lock"></i>
                Start Locking
              </button>
              <button class="btn btn-primary" id="endLockBtn" style="display: none;">
                <i class="fas fa-unlock"></i>
                End Locking
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Tasks Section -->
      <section id="tasks" class="section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-tasks"></i>
              Training Tasks
            </h2>
          </div>
          <div class="card-body">
            <!-- Task Category Filters -->
            <div class="task-categories">
              <button class="category-filter active" data-category="all">All</button>
              <button class="category-filter" data-category="basic">Basic Training</button>
              <button class="category-filter" data-category="advanced">Advanced Feminization</button>
              <button class="category-filter" data-category="behavioral">Behavioral Training</button>
              <button class="category-filter" data-category="mental">Mental Conditioning</button>
              <button class="category-filter" data-category="physical">Physical Training</button>
            </div>

            <div class="task-grid" id="taskGrid">
              <!-- Tasks will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </section>

      <!-- Hypno Section -->
      <section id="hypno" class="section">
        <!-- Active Session Card -->
        <div class="card hypno-session-card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-brain"></i>
              Active Hypno Session
            </h2>
          </div>
          <div class="card-body">
            <div class="audio-player">
              <div class="audio-controls">
                <button class="play-btn" id="playBtn" onclick="toggleHypnoSession()">
                  <i class="fas fa-play" id="playIcon"></i>
                </button>
                <div class="audio-info">
                  <div class="audio-title" id="sessionTitle">Deep Feminization Induction</div>
                  <div class="audio-duration">Duration: 25:00</div>
                </div>
              </div>
              
              <div class="session-timer">
                <div class="timer-display" id="timerDisplay">25:00</div>
                <div class="timer-label">Remaining Time</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Hypno Library -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-headphones"></i>
              Hypno Library
            </h2>
          </div>
          <div class="card-body">
            <div class="task-grid" id="hypnoGrid">
              <!-- Hypno sessions will be populated by JavaScript -->
            </div>
          </div>
        </div>

        <!-- Hypno Progress -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-chart-line"></i>
              Hypno Progress
            </h2>
          </div>
          <div class="card-body">
            <div class="stats-grid">
              <div class="stat-card">
                <i class="fas fa-clock stat-icon"></i>
                <div class="stat-number" id="hypnoHours">0</div>
                <div class="stat-label">Hours Listened</div>
              </div>
              <div class="stat-card">
                <i class="fas fa-brain stat-icon"></i>
                <div class="stat-number" id="hypnoSessions">0</div>
                <div class="stat-label">Sessions</div>
              </div>
              <div class="stat-card">
                <i class="fas fa-fire stat-icon"></i>
                <div class="stat-number" id="hypnoStreak">0</div>
                <div class="stat-label">Day Streak</div>
              </div>
              <div class="stat-card">
                <i class="fas fa-percentage stat-icon"></i>
                <div class="stat-number" id="hypnoCompliance">0%</div>
                <div class="stat-label">Compliance</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Achievements Section -->
      <section id="achievements" class="section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-trophy"></i>
              Achievement System
            </h2>
          </div>
          <div class="card-body">
            <div class="achievement-grid" id="achievementGrid">
              <!-- Achievements will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </section>

      <!-- Profile Section -->
      <section id="profile" class="section">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <i class="fas fa-user"></i>
              Personal Profile
            </h2>
          </div>
          <div class="card-body">
            <div class="profile-grid">
              <div class="profile-info-card">
                <div class="profile-avatar-large" id="profileAvatarLarge">ðŸ‘¸</div>
                <div class="profile-name" id="profileNameDisplay">Princess</div>
                <div class="profile-title" id="profileTitleDisplay">Curious â€¢ Level 1</div>
                <div class="profile-stats">
                  <div class="stat-card">
                    <div class="stat-number" id="profileTotalXP">0</div>
                    <div class="stat-label">Total XP</div>
                  </div>
                  <div class="stat-card">
                    <div class="stat-number" id="profileDaysActive">0</div>
                    <div class="stat-label">Active Days</div>
                  </div>
                </div>
              </div>
              <div>
                <div class="card" style="margin-bottom: 0;">
                  <div class="card-body">
                    <h3 style="margin-bottom: 16px; color: var(--text);">Settings</h3>
                    <div style="display: flex; flex-direction: column; gap: 16px;">
                      <button class="btn btn-primary" onclick="openSettings()">
                        <i class="fas fa-edit"></i>
                        Edit Profile
                      </button>
                      <button class="btn btn-primary" onclick="exportData()">
                        <i class="fas fa-download"></i>
                        Export Data
                      </button>
                      <button class="btn btn-primary" onclick="resetProgress()">
                        <i class="fas fa-redo"></i>
                        Reset Progress
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-item" id="horninessStatus">
        <i class="fas fa-fire status-icon"></i>
        <div>
          <div class="status-label">Arousal</div>
          <div class="status-value">Low</div>
        </div>
      </div>
      <div class="status-item" id="chastityStatus">
        <i class="fas fa-lock status-icon"></i>
        <div>
          <div class="status-label">Chastity</div>
          <div class="status-value">Off <span class="status-indicator inactive"></span></div>
        </div>
      </div>
      <div class="status-item" id="plugStatus">
        <i class="fas fa-circle status-icon"></i>
        <div>
          <div class="status-label">Plug</div>
          <div class="status-value">Out <span class="status-indicator inactive"></span></div>
        </div>
      </div>
      <div class="status-item" id="alertsStatus">
        <i class="fas fa-bell status-icon"></i>
        <div>
          <div class="status-label">Alerts</div>
          <div class="status-value">0</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Notification Container -->
  <div class="notification-container" id="notificationContainer"></div>

  <!-- JavaScript -->
  <script>
    // ===== APPLICATION STATE =====
    let appState = {
      // User Profile
      profile: {
        name: 'Princess',
        avatar: 'ðŸ‘¸',
        level: 1,
        title: 'Curious',
        bio: 'My transformation journey begins now! ðŸ’•',
        joinDate: new Date(),
        isPublic: true,
        showProgress: true,
        allowMessages: false
      },

      // Progress Data
      progress: {
        xp: 0,
        totalXP: 0,
        level: 1,
        nextLevelXP: 100,
        feminization: 0,
        obedience: 0,
        exposure: 0,
        hypnoCompliance: 0
      },

      // Statistics
      stats: {
        tasksCompleted: 0,
        dayStreak: 0,
        totalSessions: 0,
        totalHours: 0,
        completionRate: 0,
        achievementsUnlocked: 0,
        daysActive: 0
      },

      // Hypno Stats
      hypnoStats: {
        totalHours: 0,
        totalSessions: 0,
        dayStreak: 0,
        compliance: 0,
        currentSession: null,
        sessionStartTime: null,
        isPlaying: false
      },

      // Days Locked State
      daysLocked: {
        isLocked: false,
        startDate: null,
        endDate: null,
        currentStreak: 0,
        longestStreak: 0,
        totalDaysLocked: 0,
        lockedDays: new Set(),
        milestones: {
          1: false,
          7: false,
          30: false,
          90: false
        }
      },

      // Enhanced Tasks with Categories
      tasks: [
        // Basic Training
        {
          id: 1,
          title: "Daily Posture Practice",
          description: "Practice feminine posture for 15 minutes",
          xp: 25,
          skillType: "feminization",
          category: "basic",
          completed: false,
          daily: true
        },
        {
          id: 2,
          title: "Voice Training Session",
          description: "Practice feminine voice for 20 minutes",
          xp: 30,
          skillType: "feminization",
          category: "basic",
          completed: false,
          daily: true
        },
        {
          id: 3,
          title: "Walking in Heels",
          description: "Practice walking gracefully in heels",
          xp: 35,
          skillType: "feminization",
          category: "basic",
          completed: false,
          daily: true
        },
        {
          id: 4,
          title: "Makeup Application",
          description: "Complete daily makeup routine",
          xp: 40,
          skillType: "feminization",
          category: "basic",
          completed: false,
          daily: true
        },

        // Advanced Feminization
        {
          id: 5,
          title: "Shopping for Feminine Clothes",
          description: "Browse and try on feminine clothing",
          xp: 50,
          skillType: "feminization",
          category: "advanced",
          completed: false,
          daily: false
        },
        {
          id: 6,
          title: "Hair Styling Practice",
          description: "Learn new feminine hairstyles",
          xp: 35,
          skillType: "feminization",
          category: "advanced",
          completed: false,
          daily: false
        },
        {
          id: 7,
          title: "Nail Care Routine",
          description: "Complete manicure and nail art",
          xp: 30,
          skillType: "feminization",
          category: "advanced",
          completed: false,
          daily: false
        },
        {
          id: 8,
          title: "Skin Care Regimen",
          description: "Complete advanced skincare routine",
          xp: 25,
          skillType: "feminization",
          category: "advanced",
          completed: false,
          daily: true
        },

        // Behavioral Training
        {
          id: 9,
          title: "Submissive Meditation",
          description: "10 minutes of submissive mindfulness",
          xp: 30,
          skillType: "obedience",
          category: "behavioral",
          completed: false,
          daily: true
        },
        {
          id: 10,
          title: "Feminine Gestures Practice",
          description: "Practice elegant feminine movements",
          xp: 25,
          skillType: "obedience",
          category: "behavioral",
          completed: false,
          daily: true
        },
        {
          id: 11,
          title: "Etiquette Training",
          description: "Study and practice feminine etiquette",
          xp: 35,
          skillType: "obedience",
          category: "behavioral",
          completed: false,
          daily: false
        },
        {
          id: 12,
          title: "Role-play Scenarios",
          description: "Practice different feminine personas",
          xp: 45,
          skillType: "obedience",
          category: "behavioral",
          completed: false,
          daily: false
        },

        // Mental Conditioning
        {
          id: 13,
          title: "Positive Affirmations",
          description: "Recite feminine affirmations",
          xp: 20,
          skillType: "hypnoCompliance",
          category: "mental",
          completed: false,
          daily: true
        },
        {
          id: 14,
          title: "Hypno Session",
          description: "Listen to feminization hypno audio",
          xp: 40,
          skillType: "hypnoCompliance",
          category: "mental",
          completed: false,
          daily: false
        },
        {
          id: 15,
          title: "Visualization Exercises",
          description: "Visualize your feminine future self",
          xp: 30,
          skillType: "hypnoCompliance",
          category: "mental",
          completed: false,
          daily: true
        },
        {
          id: 16,
          title: "Confidence Building",
          description: "Practice confidence in feminine form",
          xp: 35,
          skillType: "hypnoCompliance",
          category: "mental",
          completed: false,
          daily: false
        },

        // Physical Training
        {
          id: 17,
          title: "Flexibility Exercises",
          description: "Improve flexibility and grace",
          xp: 25,
          skillType: "exposure",
          category: "physical",
          completed: false,
          daily: true
        },
        {
          id: 18,
          title: "Dance Practice",
          description: "Learn feminine dance moves",
          xp: 40,
          skillType: "exposure",
          category: "physical",
          completed: false,
          daily: false
        },
        {
          id: 19,
          title: "Body Movement Training",
          description: "Practice fluid, feminine movements",
          xp: 30,
          skillType: "exposure",
          category: "physical",
          completed: false,
          daily: true
        },
        {
          id: 20,
          title: "Endurance Building",
          description: "Build stamina for extended sessions",
          xp: 35,
          skillType: "exposure",
          category: "physical",
          completed: false,
          daily: false
        }
      ],

      // Hypno Sessions
      hypnoSessions: [
        {
          id: 1,
          title: "Deep Feminization Induction",
          description: "Complete feminization hypno session",
          duration: 25,
          xp: 50,
          compliance: 15,
          completed: false,
          type: "feminization"
        },
        {
          id: 2,
          title: "Sissy Slave Training",
          description: "Advanced obedience programming",
          duration: 30,
          xp: 60,
          compliance: 20,
          completed: false,
          type: "obedience"
        },
        {
          id: 3,
          title: "Bimbo Transformation",
          description: "Mental bimbo conditioning",
          duration: 20,
          xp: 45,
          compliance: 18,
          completed: false,
          type: "mental"
        },
        {
          id: 4,
          title: "Cock Worship Training",
          description: "Programming for cock addiction",
          duration: 35,
          xp: 70,
          compliance: 25,
          completed: false,
          type: "sexual"
        },
        {
          id: 5,
          title: "Chastity Acceptance",
          description: "Learn to love being locked",
          duration: 28,
          xp: 55,
          compliance: 22,
          completed: false,
          type: "chastity"
        },
        {
          id: 6,
          title: "Feminine Voice Training",
          description: "Hypno to develop feminine voice",
          duration: 22,
          xp: 40,
          compliance: 12,
          completed: false,
          type: "feminization"
        }
      ],

      // Achievements
      achievements: [
        {
          id: 1,
          title: "First Steps",
          description: "Complete your first task",
          icon: "ðŸŒ¸",
          xp: 0,
          unlocked: false,
          progress: 0,
          target: 1
        },
        {
          id: 2,
          title: "Dedicated",
          description: "Maintain a 7-day streak",
          icon: "ðŸ’Ž",
          xp: 500,
          unlocked: false,
          progress: 0,
          target: 7
        },
        {
          id: 3,
          title: "Natural Beauty",
          description: "Reach 50% in Feminization",
          icon: "ðŸ’„",
          xp: 250,
          unlocked: false,
          progress: 0,
          target: 50
        },
        {
          id: 4,
          title: "Obedient",
          description: "Reach 25% in Obedience",
          icon: "ðŸ’–",
          xp: 200,
          unlocked: false,
          progress: 0,
          target: 25
        },
        {
          id: 5,
          title: "Training Enthusiast",
          description: "Complete 50 tasks",
          icon: "ðŸ†",
          xp: 300,
          unlocked: false,
          progress: 0,
          target: 50
        },
        {
          id: 6,
          title: "Hypno Lover",
          description: "Listen to 10 hours of hypno",
          icon: "ðŸ§ ",
          xp: 400,
          unlocked: false,
          progress: 0,
          target: 10
        },
        {
          id: 7,
          title: "Mind Controlled",
          description: "Reach 75% hypno compliance",
          icon: "ðŸŒ€",
          xp: 500,
          unlocked: false,
          progress: 0,
          target: 75
        }
      ],

      // Current task filter
      currentCategory: 'all',

      // Settings
      settings: {
        theme: 'rose',
        animations: true,
        soundEffects: false,
        vibrations: false,
        notifications: {
          daily: true,
          achievements: true,
          community: false,
          progress: true,
          time: '20:00'
        }
      }
    };

    // ===== LEVEL SYSTEM =====
    const levelSystem = {
      levels: [
        { name: "Curious", xp: 0, title: "Curious" },
        { name: "Exploring", xp: 100, title: "Explorer" },
        { name: "Committed", xp: 300, title: "Committed" },
        { name: "Devoted", xp: 600, title: "Devoted" },
        { name: "Sissy", xp: 1000, title: "True Sissy" },
        { name: "Slut", xp: 1500, title: "Sissy Slut" },
        { name: "Whore", xp: 2000, title: "Sissy Whore" },
        { name: "BIMBO", xp: 2500, title: "True BIMBO" },
        { name: "GODDESS", xp: 3000, title: "Sissy Goddess" }
      ],

      getCurrentLevel(xp) {
        for (let i = this.levels.length - 1; i >= 0; i--) {
          if (xp >= this.levels[i].xp) {
            return { ...this.levels[i], index: i };
          }
        }
        return { ...this.levels[0], index: 0 };
      },

      getNextLevel(currentIndex) {
        return currentIndex < this.levels.length - 1 ? this.levels[currentIndex + 1] : null;
      }
    };

    // ===== CALENDAR STATE =====
    let calendarState = {
      currentYear: new Date().getFullYear(),
      currentMonth: new Date().getMonth()
    };

    // ===== HYPNO SESSION TIMER =====
    let hypnoTimer = null;
    let remainingTime = 0;

    // ===== SETTINGS FUNCTIONS =====
    function openSettings() {
      const modal = document.getElementById('settingsModal');
      const nameInput = document.getElementById('nameInput');
      
      nameInput.value = appState.profile.name;
      
      // Update selected avatar
      document.querySelectorAll('.avatar-option').forEach(option => {
        option.classList.remove('selected');
        if (option.dataset.avatar === appState.profile.avatar) {
          option.classList.add('selected');
        }
      });
      
      modal.classList.add('show');
    }

    function closeSettings() {
      const modal = document.getElementById('settingsModal');
      modal.classList.remove('show');
    }

    function selectAvatar(avatar) {
      document.querySelectorAll('.avatar-option').forEach(option => {
        option.classList.remove('selected');
      });
      document.querySelector(`[data-avatar="${avatar}"]`).classList.add('selected');
    }

    function saveSettings() {
      const nameInput = document.getElementById('nameInput');
      const selectedAvatar = document.querySelector('.avatar-option.selected');
      
      if (nameInput.value.trim()) {
        appState.profile.name = nameInput.value.trim();
      }
      
      if (selectedAvatar) {
        appState.profile.avatar = selectedAvatar.dataset.avatar;
      }
      
      updateProfile();
      updateProfileDisplays();
      saveAppState();
      closeSettings();
      
      showNotification({
        title: 'Profile Updated! âœ¨',
        message: 'Your profile has been successfully updated!',
        type: 'success',
        duration: 3000
      });
    }

    function updateProfileDisplays() {
      document.getElementById('profileName').textContent = appState.profile.name;
      document.getElementById('profileAvatar').textContent = appState.profile.avatar;
      document.getElementById('profileAvatarLarge').textContent = appState.profile.avatar;
      document.getElementById('profileNameDisplay').textContent = appState.profile.name;
    }

    // ===== HYPNO FUNCTIONS =====
    function updateHypnoSection() {
      const hypnoGrid = document.getElementById('hypnoGrid');
      const hypnoHours = document.getElementById('hypnoHours');
      const hypnoSessions = document.getElementById('hypnoSessions');
      const hypnoStreak = document.getElementById('hypnoStreak');
      const hypnoCompliance = document.getElementById('hypnoCompliance');
      
      if (hypnoHours) hypnoHours.textContent = Math.floor(appState.hypnoStats.totalHours);
      if (hypnoSessions) hypnoSessions.textContent = appState.hypnoStats.totalSessions;
      if (hypnoStreak) hypnoStreak.textContent = appState.hypnoStats.dayStreak;
      if (hypnoCompliance) hypnoCompliance.textContent = appState.progress.hypnoCompliance + '%';
      
      if (hypnoGrid) {
        hypnoGrid.innerHTML = '';
        
        appState.hypnoSessions.forEach(session => {
          const sessionCard = document.createElement('div');
          sessionCard.className = `task-card ${session.completed ? 'completed' : ''}`;
          sessionCard.innerHTML = `
            <div class="task-header">
              <div class="task-title">${session.title}</div>
              <div class="task-xp">+${session.xp} XP</div>
            </div>
            <div class="task-description">${session.description}</div>
            <div style="display: flex; justify-content: space-between; align-items: center; margin: 12px 0;">
              <small style="color: var(--text-light);">Duration: ${session.duration} min</small>
              <small style="color: var(--hypno);">+${session.compliance}% compliance</small>
            </div>
            <div class="task-actions">
              <button class="btn btn-hypno btn-sm" 
                      onclick="startHypnoSession(${session.id})" 
                      ${session.completed ? 'disabled' : ''}>
                ${session.completed ? 'âœ“ Completed' : 'Start Session'}
              </button>
            </div>
          `;
          hypnoGrid.appendChild(sessionCard);
        });
      }
    }

    function startHypnoSession(sessionId) {
      const session = appState.hypnoSessions.find(s => s.id === sessionId);
      if (!session) return;
      
      appState.hypnoStats.currentSession = sessionId;
      appState.hypnoStats.sessionStartTime = Date.now();
      remainingTime = session.duration * 60; // Convert to seconds
      
      document.getElementById('sessionTitle').textContent = session.title;
      updateTimerDisplay();
      
      showNotification({
        title: 'Hypno Session Started ðŸ§ ',
        message: `${session.title} session is now active`,
        type: 'success',
        duration: 3000
      });
      
      // Start the timer
      if (hypnoTimer) clearInterval(hypnoTimer);
      hypnoTimer = setInterval(() => {
        remainingTime--;
        updateTimerDisplay();
        
        if (remainingTime <= 0) {
          completeHypnoSession(sessionId);
        }
      }, 1000);
      
      saveAppState();
    }

    function toggleHypnoSession() {
      if (appState.hypnoStats.isPlaying) {
        pauseHypnoSession();
      } else {
        resumeHypnoSession();
      }
    }

    function resumeHypnoSession() {
      if (appState.hypnoStats.currentSession && remainingTime > 0) {
        appState.hypnoStats.isPlaying = true;
        document.getElementById('playIcon').className = 'fas fa-pause';
        
        if (hypnoTimer) clearInterval(hypnoTimer);
        hypnoTimer = setInterval(() => {
          remainingTime--;
          updateTimerDisplay();
          
          if (remainingTime <= 0) {
            completeHypnoSession(appState.hypnoStats.currentSession);
          }
        }, 1000);
      }
    }

    function pauseHypnoSession() {
      appState.hypnoStats.isPlaying = false;
      document.getElementById('playIcon').className = 'fas fa-play';
      
      if (hypnoTimer) {
        clearInterval(hypnoTimer);
        hypnoTimer = null;
      }
    }

    function completeHypnoSession(sessionId) {
      const session = appState.hypnoSessions.find(s => s.id === sessionId);
      if (!session) return;
      
      session.completed = true;
      appState.hypnoStats.totalSessions++;
      appState.hypnoStats.totalHours += session.duration / 60;
      appState.hypnoStats.currentSession = null;
      appState.hypnoStats.isPlaying = false;
      
      addXP(session.xp, `Completed hypno session: ${session.title}`);
      addSkillXP('hypnoCompliance', session.compliance);
      
      if (hypnoTimer) {
        clearInterval(hypnoTimer);
        hypnoTimer = null;
      }
      
      document.getElementById('playIcon').className = 'fas fa-play';
      document.getElementById('timerDisplay').textContent = '00:00';
      document.getElementById('sessionTitle').textContent = 'No Active Session';
      
      showNotification({
        title: 'Hypno Session Complete! ðŸŽ‰',
        message: `You've completed ${session.title}. Well done!`,
        type: 'success',
        duration: 5000
      });
      
      updateHypnoSection();
      checkAchievements();
      saveAppState();
    }

    function updateTimerDisplay() {
      const minutes = Math.floor(remainingTime / 60);
      const seconds = remainingTime % 60;
      const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      document.getElementById('timerDisplay').textContent = display;
    }

    // ===== UTILITY FUNCTIONS =====
    function saveData(key, value) {
      try {
        localStorage.setItem(key, JSON.stringify(value));
        return true;
      } catch (error) {
        console.error('Save error:', error);
        return false;
      }
    }

    function loadData(key, defaultValue) {
      try {
        const data = localStorage.getItem(key);
        return data ? JSON.parse(data) : defaultValue;
      } catch (error) {
        console.error('Load error:', error);
        return defaultValue;
      }
    }

    function showSection(sectionId) {
      // Update URL hash
      if (history.pushState) {
        history.pushState(null, null, '#' + sectionId);
      } else {
        window.location.hash = sectionId;
      }

      // Hide all sections and deactivate all tabs
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
      
      // Show target section and activate corresponding tab
      const targetSection = document.getElementById(sectionId);
      const targetTab = document.querySelector(`[data-section="${sectionId}"]`);
      
      if (targetSection && targetTab) {
        targetSection.classList.add('active');
        targetTab.classList.add('active');
        
        // Trigger section-specific updates
        switch(sectionId) {
          case 'dashboard':
            updateDashboard();
            break;
          case 'dayslocked':
            updateDaysLockedTab();
            break;
          case 'tasks':
            updateTasks();
            break;
          case 'hypno':
            updateHypnoSection();
            break;
          case 'achievements':
            updateAchievements();
            break;
          case 'profile':
            updateProfile();
            break;
        }
      }
    }

    function showNotification(options) {
      const container = document.getElementById('notificationContainer');
      const notification = document.createElement('div');
      
      notification.className = `notification ${options.type || 'info'}`;
      notification.innerHTML = `
        <div class="notification-header">
          <div class="notification-title">${options.title || 'Notification'}</div>
          <button class="notification-close" onclick="this.parentElement.parentElement.remove()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="notification-content">${options.message}</div>
      `;
      
      container.appendChild(notification);
      
      // Auto remove after duration
      if (options.duration) {
        setTimeout(() => {
          if (notification.parentElement) {
            notification.remove();
          }
        }, options.duration);
      }
    }

    function addXP(amount, reason = '') {
      const oldLevel = levelSystem.getCurrentLevel(appState.progress.xp);
      appState.progress.xp += amount;
      appState.progress.totalXP += amount;
      
      const newLevel = levelSystem.getCurrentLevel(appState.progress.xp);
      
      // Check for level up
      if (newLevel.index > oldLevel.index) {
        appState.progress.level = newLevel.index + 1;
        appState.profile.title = newLevel.title;
        showNotification({
          title: 'Level Up! ðŸŽ‰',
          message: `Congratulations! You've reached ${newLevel.title} (Level ${newLevel.index + 1})`,
          type: 'success',
          duration: 8000
        });
        
        // Add level up bonus XP
        appState.progress.xp += 50;
        appState.progress.totalXP += 50;
      }
      
      // Update UI
      updateStats();
      updateProgress();
      checkAchievements();
      
      // Show XP notification
      if (reason) {
        showNotification({
          title: `+${amount} XP`,
          message: reason,
          type: 'success',
          duration: 3000
        });
      }
      
      // Save state
      saveAppState();
    }

    function addSkillXP(skillType, amount) {
      if (appState.progress[skillType] !== undefined) {
        appState.progress[skillType] = Math.min(100, appState.progress[skillType] + amount);
        updateProgress();
        checkAchievements();
        saveAppState();
        
        showNotification({
          title: `${skillType.charAt(0).toUpperCase() + skillType.slice(1)} +${amount}%`,
          message: `Progress in ${skillType}!`,
          type: 'success',
          duration: 3000
        });
      }
    }

    function updateStats() {
      // Update stat displays
      document.getElementById('totalXP').textContent = appState.progress.totalXP.toLocaleString();
      document.getElementById('currentLevel').textContent = appState.progress.level;
      document.getElementById('tasksCompleted').textContent = appState.stats.tasksCompleted;
      document.getElementById('dayStreak').textContent = appState.stats.dayStreak;
      document.getElementById('totalSessions').textContent = appState.stats.totalSessions;
      document.getElementById('completionRate').textContent = appState.stats.completionRate + '%';
      
      // Update profile displays
      const currentLevel = levelSystem.getCurrentLevel(appState.progress.xp);
      document.getElementById('profileLevel').textContent = `${currentLevel.title} (Level ${currentLevel.index + 1})`;
      document.getElementById('profileTotalXP').textContent = appState.progress.totalXP.toLocaleString();
      document.getElementById('profileDaysActive').textContent = appState.stats.daysActive;
    }

    function updateProgress() {
      const currentLevel = levelSystem.getCurrentLevel(appState.progress.xp);
      const nextLevel = levelSystem.getNextLevel(currentLevel.index);
      
      document.getElementById('levelBadge').textContent = currentLevel.title;
      document.getElementById('levelDisplay').textContent = `Level ${currentLevel.index + 1} - ${currentLevel.title}`;
      
      if (nextLevel) {
        const progress = ((appState.progress.xp - currentLevel.xp) / (nextLevel.xp - currentLevel.xp)) * 100;
        document.getElementById('progressFill').style.width = Math.min(progress, 100) + '%';
        document.getElementById('xpProgress').style.width = Math.min(progress, 100) + '%';
        document.getElementById('xpDisplay').textContent = `${appState.progress.xp} / ${nextLevel.xp} XP`;
        document.getElementById('xpProgressText').textContent = `${appState.progress.xp} / ${nextLevel.xp} XP`;
      } else {
        document.getElementById('progressFill').style.width = '100%';
        document.getElementById('xpProgress').style.width = '100%';
        document.getElementById('xpDisplay').textContent = 'Max level reached';
        document.getElementById('xpProgressText').textContent = 'Max level reached';
      }
      
      // Update skill progress bars
      document.getElementById('feminizationProgress').style.width = appState.progress.feminization + '%';
      document.getElementById('obedienceProgress').style.width = appState.progress.obedience + '%';
      document.getElementById('exposureProgress').style.width = appState.progress.exposure + '%';
      document.getElementById('hypnoProgress').style.width = appState.progress.hypnoCompliance + '%';
      
      // Update percentage displays
      document.getElementById('feminizationPercent').textContent = appState.progress.feminization + '%';
      document.getElementById('obediencePercent').textContent = appState.progress.obedience + '%';
      document.getElementById('exposurePercent').textContent = appState.progress.exposure + '%';
      document.getElementById('hypnoPercent').textContent = appState.progress.hypnoCompliance + '%';
    }

    function updateDashboard() {
      updateStats();
      updateProgress();
    }

    // ===== DAYS LOCKED FUNCTIONS =====
    function updateDaysLockedTab() {
      calculateDaysLocked();
      updateDaysLockedCounter();
      renderCalendar();
      updateLockStatistics();
      updateLockMilestones();
    }

    function calculateDaysLocked() {
      if (!appState.daysLocked.isLocked || !appState.daysLocked.startDate) {
        return;
      }

      const startDate = new Date(appState.daysLocked.startDate);
      const endDate = appState.daysLocked.endDate ? new Date(appState.daysLocked.endDate) : new Date();
      
      // Calculate total days locked
      const diffTime = Math.abs(endDate - startDate);
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      appState.daysLocked.totalDaysLocked = diffDays;
      appState.daysLocked.currentStreak = appState.daysLocked.isLocked ? diffDays : 0;
      
      // Generate set of all locked days
      appState.daysLocked.lockedDays = new Set();
      let currentDate = new Date(startDate);
      
      while (currentDate <= endDate) {
        appState.daysLocked.lockedDays.add(currentDate.toISOString().split('T')[0]);
        currentDate.setDate(currentDate.getDate() + 1);
      }
      
      // Check milestones
      appState.daysLocked.milestones[1] = diffDays >= 1;
      appState.daysLocked.milestones[7] = diffDays >= 7;
      appState.daysLocked.milestones[30] = diffDays >= 30;
      appState.daysLocked.milestones[90] = diffDays >= 90;
    }

    function updateDaysLockedCounter() {
      document.getElementById('daysLockedCount').textContent = appState.daysLocked.totalDaysLocked;
      document.getElementById('streakProgress').textContent = `${appState.daysLocked.totalDaysLocked} days`;
      
      // Update progress bar (assuming 100 days is 100%)
      const progressPercentage = Math.min(appState.daysLocked.totalDaysLocked / 100 * 100, 100);
      document.getElementById('streakProgressFill').style.width = `${progressPercentage}%`;
    }

    function renderCalendar() {
      const year = calendarState.currentYear;
      const month = calendarState.currentMonth;
      
      const date = new Date(year, month, 1);
      const monthNames = [
        'January', 'February', 'March', 'April', 'May', 'June',
        'July', 'August', 'September', 'October', 'November', 'December'
      ];
      
      document.getElementById('currentMonth').textContent = `${monthNames[month]} ${year}`;
      
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      const daysInMonth = lastDay.getDate();
      const startingDay = firstDay.getDay();
      
      const calendarGrid = document.getElementById('calendarGrid');
      calendarGrid.innerHTML = '';
      
      // Add weekday headers
      const weekdays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
      weekdays.forEach(day => {
        const dayHeader = document.createElement('div');
        dayHeader.className = 'calendar-day-header';
        dayHeader.textContent = day;
        calendarGrid.appendChild(dayHeader);
      });
      
      // Add empty cells for days before the month starts
      const startingDayAdjusted = startingDay === 0 ? 6 : startingDay - 1;
      for (let i = 0; i < startingDayAdjusted; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.className = 'calendar-day empty';
        calendarGrid.appendChild(emptyDay);
      }
      
      // Add days of the month
      const today = new Date();
      for (let day = 1; day <= daysInMonth; day++) {
        const dayElement = document.createElement('div');
        dayElement.className = 'calendar-day';
        dayElement.textContent = day;
        
        const dayDate = new Date(year, month, day);
        const dayString = dayDate.toISOString().split('T')[0];
        
        // Check if this day is locked
        if (appState.daysLocked.lockedDays.has(dayString)) {
          dayElement.classList.add('locked');
        }
        
        // Check if this is today
        if (dayDate.toDateString() === today.toDateString()) {
          dayElement.classList.add('current');
        }
        
        calendarGrid.appendChild(dayElement);
      }
    }

    function changeMonth(delta) {
      calendarState.currentMonth += delta;
      
      if (calendarState.currentMonth > 11) {
        calendarState.currentMonth = 0;
        calendarState.currentYear++;
      } else if (calendarState.currentMonth < 0) {
        calendarState.currentMonth = 11;
        calendarState.currentYear--;
      }
      
      renderCalendar();
    }

    function updateLockStatistics() {
      document.getElementById('totalDaysLocked').textContent = appState.daysLocked.totalDaysLocked;
      document.getElementById('currentStreak').textContent = appState.daysLocked.currentStreak;
      document.getElementById('longestStreak').textContent = appState.daysLocked.longestStreak;
      
      // Calculate percentage of year locked
      const daysInYear = 365;
      const percentLocked = Math.round((appState.daysLocked.totalDaysLocked / daysInYear) * 100);
      document.getElementById('lockPercentage').textContent = `${percentLocked}%`;
    }

    function updateLockMilestones() {
      const milestoneCards = document.querySelectorAll('#lockMilestones .achievement-card');
      
      milestoneCards.forEach(card => {
        const milestone = parseInt(card.dataset.milestone);
        if (appState.daysLocked.milestones[milestone]) {
          card.classList.add('unlocked');
        } else {
          card.classList.remove('unlocked');
        }
      });
    }

    function startLock() {
      if (appState.daysLocked.isLocked) {
        showNotification({
          title: 'Already Locked',
          message: 'You are already in a chastity session!',
          type: 'warning',
          duration: 3000
        });
        return;
      }

      appState.daysLocked.isLocked = true;
      appState.daysLocked.startDate = new Date().toISOString();
      appState.daysLocked.endDate = null;
      
      document.getElementById('startLockBtn').style.display = 'none';
      document.getElementById('endLockBtn').style.display = 'inline-flex';
      
      // Update status bar
      document.querySelector('#chastityStatus .status-value').innerHTML = 'On <span class="status-indicator active"></span>';
      
      showNotification({
        title: 'Chastity Started! ðŸ”’',
        message: 'Your chastity session has begun. Good luck sweetie!',
        type: 'success',
        duration: 5000
      });
      
      addXP(100, 'Started chastity');
      updateDaysLockedTab();
      saveAppState();
    }

    function endLock() {
      if (!appState.daysLocked.isLocked) {
        showNotification({
          title: 'Not Locked',
          message: 'You are not in a chastity session!',
          type: 'warning',
          duration: 3000
        });
        return;
      }

      appState.daysLocked.isLocked = false;
      appState.daysLocked.endDate = new Date().toISOString();
      
      // Update longest streak if needed
      if (appState.daysLocked.totalDaysLocked > appState.daysLocked.longestStreak) {
        appState.daysLocked.longestStreak = appState.daysLocked.totalDaysLocked;
      }
      
      document.getElementById('startLockBtn').style.display = 'inline-flex';
      document.getElementById('endLockBtn').style.display = 'none';
      
      // Update status bar
      document.querySelector('#chastityStatus .status-value').innerHTML = 'Off <span class="status-indicator inactive"></span>';
      
      const bonusXP = appState.daysLocked.totalDaysLocked * 10;
      addXP(bonusXP, `Chastity ended - ${appState.daysLocked.totalDaysLocked} days`);
      
      showNotification({
        title: 'Chastity Ended! ðŸŽ‰',
        message: `Congratulations! You were locked for ${appState.daysLocked.totalDaysLocked} days! +${bonusXP} XP`,
        type: 'success',
        duration: 8000
      });
      
      updateDaysLockedTab();
      saveAppState();
    }

    // ===== ENHANCED TASKS FUNCTIONS =====
    function updateTasks() {
      const taskGrid = document.getElementById('taskGrid');
      const currentCategory = appState.currentCategory;
      
      // Filter tasks by category
      const filteredTasks = currentCategory === 'all' 
        ? appState.tasks 
        : appState.tasks.filter(task => task.category === currentCategory);
      
      taskGrid.innerHTML = '';
      
      filteredTasks.forEach(task => {
        const categoryNames = {
          'basic': 'Basic',
          'advanced': 'Advanced',
          'behavioral': 'Behavioral',
          'mental': 'Mental',
          'physical': 'Physical'
        };
        
        const taskCard = document.createElement('div');
        taskCard.className = `task-card ${task.completed ? 'completed' : ''}`;
        taskCard.innerHTML = `
          <div class="task-header">
            <div style="display: flex; align-items: center; gap: 8px;">
              <div class="task-title">${task.title}</div>
              <div class="task-category-badge">${categoryNames[task.category] || task.category}</div>
            </div>
            <div class="task-xp">+${task.xp} XP</div>
          </div>
          <div class="task-description">${task.description}</div>
          <div class="task-actions">
            <button class="btn btn-primary btn-sm" 
                    onclick="completeTask(${task.id})" 
                    ${task.completed ? 'disabled' : ''}>
              ${task.completed ? 'âœ“ Completed' : 'Complete'}
            </button>
          </div>
        `;
        taskGrid.appendChild(taskCard);
      });
    }

    function filterTasks(category) {
      appState.currentCategory = category;
      
      // Update filter buttons
      document.querySelectorAll('.category-filter').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.category === category) {
          btn.classList.add('active');
        }
      });
      
      updateTasks();
    }

    function completeTask(taskId) {
      const task = appState.tasks.find(t => t.id === taskId);
      if (task && !task.completed) {
        task.completed = true;
        appState.stats.tasksCompleted++;
        
        addXP(task.xp, `Task completed: ${task.title}`);
        
        if (task.skillType) {
          let skillBonus = 5;
          if (task.category === 'advanced') skillBonus = 8;
          if (task.category === 'physical') skillBonus = 6;
          if (task.category === 'mental') skillBonus = 7;
          
          addSkillXP(task.skillType, skillBonus);
        }
        
        updateTasks();
        checkAchievements();
        saveAppState();
      }
    }

    // ===== ACHIEVEMENTS FUNCTIONS =====
    function updateAchievements() {
      const achievementGrid = document.getElementById('achievementGrid');
      achievementGrid.innerHTML = '';
      
      appState.achievements.forEach(achievement => {
        const achievementCard = document.createElement('div');
        achievementCard.className = `achievement-card ${achievement.unlocked ? 'unlocked' : ''}`;
        achievementCard.innerHTML = `
          <div class="achievement-icon">${achievement.icon}</div>
          <div class="achievement-title">${achievement.title}</div>
          <div class="achievement-desc">${achievement.description}</div>
          <div class="achievement-progress">
            <div class="achievement-progress-fill" style="width: ${(achievement.progress / achievement.target) * 100}%"></div>
          </div>
        `;
        achievementGrid.appendChild(achievementCard);
      });
    }

    function checkAchievements() {
      appState.achievements.forEach(achievement => {
        if (!achievement.unlocked) {
          let progress = 0;
          
          switch(achievement.id) {
            case 1: // First Steps
              progress = appState.stats.tasksCompleted;
              break;
            case 2: // Dedicated
              progress = appState.stats.dayStreak;
              break;
            case 3: // Natural Beauty
              progress = appState.progress.feminization;
              break;
            case 4: // Obedient
              progress = appState.progress.obedience;
              break;
            case 5: // Training Enthusiast
              progress = appState.stats.tasksCompleted;
              break;
            case 6: // Hypno Lover
              progress = Math.floor(appState.hypnoStats.totalHours);
              break;
            case 7: // Mind Controlled
              progress = appState.progress.hypnoCompliance;
              break;
          }
          
          achievement.progress = Math.min(progress, achievement.target);
          
          if (achievement.progress >= achievement.target) {
            achievement.unlocked = true;
            appState.stats.achievementsUnlocked++;
            
            if (achievement.xp > 0) {
              addXP(achievement.xp, `Achievement unlocked: ${achievement.title}`);
            }
            
            showNotification({
              title: `Achievement Unlocked! ${achievement.icon}`,
              message: achievement.title,
              type: 'success',
              duration: 6000
            });
          }
        }
      });
      
      updateAchievements();
    }

    // ===== PROFILE FUNCTIONS =====
    function updateProfile() {
      document.getElementById('profileNameDisplay').textContent = appState.profile.name;
      document.getElementById('profileTitleDisplay').textContent = `${appState.profile.title} â€¢ Level ${appState.progress.level}`;
      document.getElementById('profileAvatarLarge').textContent = appState.profile.avatar;
    }

    function exportData() {
      const dataBlob = new Blob([JSON.stringify(appState, null, 2)], {type: 'application/json'});
      const url = URL.createObjectURL(dataBlob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'feminizer_backup.json';
      a.click();
      URL.revokeObjectURL(url);
      
      showNotification({
        title: 'Data Exported',
        message: 'Your data has been successfully saved!',
        type: 'success',
        duration: 3000
      });
    }

    function resetProgress() {
      if (confirm('Are you sure you want to reset all your progress? This action cannot be undone.')) {
        localStorage.removeItem('feminizer_app_state');
        location.reload();
      }
    }

    // ===== SAVE/LOAD STATE =====
    function saveAppState() {
      // Convert Set objects to arrays for JSON serialization
      const stateToSave = {
        ...appState,
        daysLocked: {
          ...appState.daysLocked,
          lockedDays: Array.from(appState.daysLocked.lockedDays)
        }
      };
      saveData('feminizer_app_state', stateToSave);
    }

    function loadAppState() {
      const savedState = loadData('feminizer_app_state', null);
      if (savedState) {
        // Merge saved state with default state
        appState = { ...appState, ...savedState };
        
        // Convert arrays back to Set objects
        if (savedState.daysLocked && savedState.daysLocked.lockedDays) {
          appState.daysLocked.lockedDays = new Set(savedState.daysLocked.lockedDays);
        }
      }
    }

    // ===== INITIALIZATION =====
    document.addEventListener('DOMContentLoaded', function() {
      // Hide loading screen
      setTimeout(() => {
        document.getElementById('loadingScreen').classList.remove('active');
      }, 2000);
      
      // Load saved state
      loadAppState();
      
      // Set initial active tab based on URL hash or default to dashboard
      const initialSection = window.location.hash ? window.location.hash.substring(1) : 'dashboard';
      showSection(initialSection);
      
      // Add click event listeners to all tabs
      document.querySelectorAll('.nav-tab').forEach(tab => {
        tab.addEventListener('click', function(e) {
          e.preventDefault();
          const sectionId = this.getAttribute('data-section');
          showSection(sectionId);
        });
      });
      
      // Add click event listeners to category filters
      document.querySelectorAll('.category-filter').forEach(filter => {
        filter.addEventListener('click', function(e) {
          e.preventDefault();
          const category = this.getAttribute('data-category');
          filterTasks(category);
        });
      });
      
      // Add event listeners for calendar navigation
      document.getElementById('prevMonth').addEventListener('click', () => changeMonth(-1));
      document.getElementById('nextMonth').addEventListener('click', () => changeMonth(1));
      
      // Add event listeners for lock controls
      document.getElementById('startLockBtn').addEventListener('click', startLock);
      document.getElementById('endLockBtn').addEventListener('click', endLock);
      
      // Update button visibility based on current lock state
      if (appState.daysLocked.isLocked) {
        document.getElementById('startLockBtn').style.display = 'none';
        document.getElementById('endLockBtn').style.display = 'inline-flex';
        document.querySelector('#chastityStatus .status-value').innerHTML = 'On <span class="status-indicator active"></span>';
      }
      
      // Close modal when clicking outside
      window.addEventListener('click', function(event) {
        const modal = document.getElementById('settingsModal');
        if (event.target === modal) {
          closeSettings();
        }
      });
      
      // Update the dashboard on initial load
      updateDashboard();
      updateTasks();
      updateAchievements();
      updateProfile();
      updateProfileDisplays();
      
      // Initialize days locked tab if it's the active section
      if (initialSection === 'dayslocked') {
        updateDaysLockedTab();
      }
      
      // Initialize hypno section if it's the active section
      if (initialSection === 'hypno') {
        updateHypnoSection();
      }
      
      // Welcome notification
      setTimeout(() => {
        showNotification({
          title: 'Welcome to Feminizer 2.0! ðŸ’•',
          message: 'Your transformation journey begins now!',
          type: 'success',
          duration: 5000
        });
      }, 2500);
    });

    // Handle browser back/forward buttons
    window.addEventListener('popstate', function() {
      const sectionId = window.location.hash ? window.location.hash.substring(1) : 'dashboard';
      showSection(sectionId);
    });

    // Auto-save state periodically
    setInterval(saveAppState, 30000); // Save every 30 seconds
  </script>
</body>
</html>
